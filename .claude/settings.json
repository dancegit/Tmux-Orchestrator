{
  "hooks": {
    "PostToolUse": [
      {
        "matcher": ".*",
        "hooks": [
          {
            "type": "command",
            "command": "python3 $CLAUDE_PROJECT_DIR/.claude/hooks/check_queue.py --agent ${TMUX_SESSION_NAME}:${TMUX_WINDOW_INDEX}",
            "timeout": 5000,
            "description": "Check message queue and git policy compliance after tool use"
          }
        ]
      }
    ],
    "Stop": [
      {
        "matcher": ".*", 
        "hooks": [
          {
            "type": "command",
            "command": "python3 $CLAUDE_PROJECT_DIR/.claude/hooks/check_queue.py --agent ${TMUX_SESSION_NAME}:${TMUX_WINDOW_INDEX} --check-idle",
            "timeout": 5000,
            "description": "Check queue when Claude becomes idle"
          }
        ]
      }
    ],
    "PostCompact": [
      {
        "matcher": ".*",
        "hooks": [
          {
            "type": "command",
            "command": "python3 $CLAUDE_PROJECT_DIR/.claude/hooks/check_queue.py --agent ${TMUX_SESSION_NAME}:${TMUX_WINDOW_INDEX} --rebrief",
            "timeout": 3000,
            "description": "Queue rebriefing message after context compaction"
          }
        ]
      }
    ],
    "SessionStart": [
      {
        "matcher": ".*",
        "hooks": [
          {
            "type": "command",
            "command": "python3 $CLAUDE_PROJECT_DIR/.claude/hooks/setup_git_policy_hooks.py --agent ${TMUX_SESSION_NAME}:${TMUX_WINDOW_INDEX}",
            "timeout": 3000,
            "description": "Setup git policy enforcement for new session"
          },
          {
            "type": "command",
            "command": "python3 $CLAUDE_PROJECT_DIR/.claude/hooks/check_queue.py --agent ${TMUX_SESSION_NAME}:${TMUX_WINDOW_INDEX} --bootstrap",
            "timeout": 5000,
            "description": "Initialize queue checking for new session"
          }
        ]
      }
    ],
    "SessionEnd": [
      {
        "matcher": ".*",
        "hooks": [
          {
            "type": "command",
            "command": "python3 $CLAUDE_PROJECT_DIR/.claude/hooks/cleanup_agent.py --agent ${TMUX_SESSION_NAME}:${TMUX_WINDOW_INDEX}",
            "timeout": 3000,
            "description": "Clean up agent resources on session end"
          }
        ]
      }
    ]
  },
  "hookExecutor": {
    "errorHandling": "continue",
    "logging": {
      "enabled": true,
      "level": "info",
      "file": "$CLAUDE_PROJECT_DIR/.claude/logs/hooks.log"
    }
  }
}